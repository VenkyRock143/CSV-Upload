<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <!-- Load Google Charts -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
  <!--table to render csv file -->
  <div class="container mt-4">
    <div class="row">
      <div class="col-12">
        <h1 class="text-center">
          <%= fileData.filename %>
        </h1>
        <br>
        <!-- search box to search for data -->
        <input class="form-control w-25" type="text" id="search" placeholder="Search...">
        <br>
        <table class="table border">
          <thead>
            <tr>
              <% fileData.header_row.forEach(function(cell, index) { %>
                <th>
                  <!-- sort button with respective ascending and descending arrows -->
                  <div class="dropdown">
                    <button class="sort btn btn-secondary" data-index="<%= index %>">Sort</button>
                    <div class="dropdown-content">
                      <a href="#" data-order="asc"><i class="fa-solid fa-down-long"></i></a>
                      <a href="#" data-order="desc"><i class="fa-solid fa-up-long"></i></a>
                    </div>
                    <!--This cell is used to display the headers -->
                    <%= cell %>
                  </div>
                </th>
                <% }); %>
            </tr>
          </thead>
          <tbody>
            <% fileData.data_rows.forEach(function(row) { %>
              <tr>
                <% Object.values(row).forEach(function(cell) { %>
                  <td>
                    <!-- This cell is used to display the table data -->
                    <%= cell %>
                  </td>
                  <% }); %>
              </tr>
              <% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- To display the Google Charts -->
  <div id="chart_div" style="width: 100%; height: 500px;"></div>

  <script src="/js/googleChart.js"></script>
  <script src="/js/sorting.js"></script>
  <script src="/js/search.js"></script>
</body>

</html>